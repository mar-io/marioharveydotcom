<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="Don&#39;t panic">

<base href="https://marioharvey.com">
<title>


     LXD Consul and Why I Love LXD 

</title>
<link rel="canonical" href="https://marioharvey.com/blog/lxd-consul-and-why-i-love-lxd/">


<script type="text/javascript">
    var baseURL = 'https:\/\/marioharvey.com';
    var host = baseURL.substring(0, baseURL.length - 1).replace(/\//g, '');
    if ((host === window.location.host) && (window.location.protocol !== 'https:')) {
        window.location.protocol = 'https:';
    }
</script>




  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/default.min.css">


<link rel="stylesheet" href="https://marioharvey.com/css/reset.css">
<link rel="stylesheet" href="https://marioharvey.com/css/pygments.css">
<link rel="stylesheet" href="https://marioharvey.com/css/main.css">


    <link rel="stylesheet" href="https://marioharvey.com/css/override.css">



<link rel="shortcut icon"

    href="https://marioharvey.com/img/leaf.ico"

>






</head>


<body lang="en">

<section class="header"> 
    <div class="container">
        <div class="content">
            
            <a href="https://marioharvey.com/"><div class="name">Mario Harvey</div></a>
            <nav>
                <ul>
                    
                    <a href="https://marioharvey.com/about/"><li>About</li></a>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">

        
            <a href="https://github.com/mar-io" target="_blank">
                <i class="icon ion-social-github"></i>
            </a>
        
        
        

        
            <a href="https://www.linkedin.com/in/marioharvey" target="_blank">
                <i class="icon ion-social-linkedin"></i>
            </a>
        

        

        
            <a href="https://soundcloud.com/charmsnakes" target="_blank">
                <i class="icon ion-ios-musical-notes larger"></i>
            </a>
        

        
            <a href="mailto:mario@harvey.codes">
                <i class="icon ion-ios-email larger"></i>
            </a>
        

        
            <a href="https://marioharvey.com/index.xml">
                <i class="icon ion-social-rss larger"></i>
            </a>
        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    LXD Consul and Why I Love LXD

</div>

                    <div class="initials"><a href="https://marioharvey.com">ad</a></div>
                </div>
                <div class="meta">
                    <div class="date" title="Thu Jun 9 2016 22:25:44 -0500">Jun 9, 2016</div>
                    <div class="reading-time"><div class="middot"></div>2 minutes read</div>
                </div>
            </div>
            <div class="markdown">
                

<p>I have been wanting to work more closely with consul as far as developing my own daemons utilizing consul. This have given me the need for quick/on-demand development consul clusters and have found that LXD has been a great tool for me. In about 20-30 seconds, this script will give you a fully functional consul cluster with isolated and persisted data within the container much like how consul would run in a data center/cloud.</p>

<p><a href="https://github.com/mar-io/lxd-consul">lxd-consul</a> is a bash script that will spin up a consul cluster on Ubuntu 16.04 LTS utilizing lxd containers.</p>

<p>lxd-consul has only been tested on Ubuntu 16.04 and should be used for dev/testing purposes. I have shared this for others interested in working or learning more about consul or lxd.</p>

<h4 id="prerequisites">Prerequisites</h4>

<ul>
<li><p>Ubuntu 16.04 LTS</p></li>

<li><p>LXD install &ndash; <a href="https://linuxcontainers.org/lxd/getting-started-cli/">howto</a></p></li>
</ul>

<h4 id="installing-lxd-consul">Installing lxd-consul</h4>

<p>Clone the repo:
<code>git clone git@github.com:mar-io/lxd-consul.git</code></p>

<p>Change Directory:
<code>cd lxd-consul</code></p>

<p>Run the script:
<code>./lxd-consul.sh create</code></p>

<p>At this point, the script will run, create containers, and return the IPs of the cluster.</p>

<p>To <strong>stop</strong> the cluster:</p>

<p><code>./lxd-consul.sh stop</code></p>

<p>To <strong>start</strong> the cluster:</p>

<p><code>./lxd-consul.sh start</code></p>

<p>To <strong>destroy</strong> the cluster:</p>

<p><code>./lxd-consul.sh destroy</code></p>

<h4 id="why-lxd-instead-of-docker">Why LXD instead of Docker?</h4>

<p>LXD is a very easy to use/install virtualization solution for Ubuntu users. With LXD you get all the benefits of Docker like speed, portability, isolation, and performance. However, you gain a more familiar hypervisor experience as opposed to the somewhat opinionated Docker workflow. LXD is designed to run containers which are running full operating systems which allow you to treat the container like a vm. LXD containers are smaller than traditional VM images and since they are containers they run very close to the metal. For this script, I utilized Alpine Linux images which are extraordinarily minimalist images using about 3MB of disk. Only potential downside is that LXD doesn&rsquo;t have a declarative configuration file (Dockerfile) or as great a mindshare/ecosystem as Docker.</p>

<p>I highly recommend reading about the ease and benefits of LXD here:
<a href="http://insights.ubuntu.com/2016/03/14/the-lxd-2-0-story-prologue/">LXD Tutorial</a></p>

                <br>
                <p><a href="https://marioharvey.com/blog/">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'marioharvey';
    var disqus_identifier = 'https:\/\/marioharvey.com\/blog\/lxd-consul-and-why-i-love-lxd\/';
    var disqus_title = 'LXD Consul and Why I Love LXD';
    var disqus_url = 'https:\/\/marioharvey.com\/blog\/lxd-consul-and-why-i-love-lxd\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
        </div>
    </div>
</section>



<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
    var pageTracker = _gat._getTracker("XYZ");
    pageTracker._trackPageview();
} catch(err) {}
</script>



  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>



</body>
</html>

